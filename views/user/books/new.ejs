<h1 class="text-3xl">Create new book</h1>

<% if (locals.error) { %>
    <p><%= error %></p>
<% } %>

<form action="/user/books/new" method="POST">
    <div class="mt-3">
        <label for="title" class="block">Title</label>
        <input type="text" name="title" id="title" value="<%= book.title %>" class="px-2 rounded-md border border-black" required></input>
    </div>
    
    <div class="mt-2">
        <label class="block" for="quantity">Book quantity</label>
        <input type="number" name="quantity" id="quantity" class="px-2 rounded-md border border-black" required></input>
    </div>
    
    <div class="mt-2">
        <label class="block" for="author">Author</label>
        <select class="px-2 rounded-md border border-black" name="author" id="author" required>
            <% authors.forEach(author => { %>
                <% if (book.author === author._id) { %>
                    <option selected value="<%= author._id %>"><%= author.name %></option>
                <% } else { %>        
                    <option value="<%= author._id %>"><%= author.name %></option>
                <% } %>
            <% }) %>
        </select>
    </div>
    
    <div class="mt-2">
        <label class="block" for="publishDate">Publish Date</label>
        <input class="px-2 rounded-md border border-black" type="date" name="publishDate" id="publishDate" 
        value="<%= book.publishDate == null ? '' : book.publishDate.toISOString().split('T')[0] %>" required></input>
    </div>
        
    <div class="mt-2">
        <label class="block" for="pageCount">Number of pages</label>
        <input class="px-2 rounded-md border border-black" type="number" name="pageCount" id="pageCount" min="1" value="<%= book.pageCount %>" required></input>
    </div>
    
    <div class="mt-2">
        <label class="block" for="coverImage">Cover Image</label>
        <input type="file" name="coverImage" id="coverImage" class="filepond w-52 border border-black rounded-md" required></input>
    </div>
    
    <div class="mt-2">
        <label class="block" for="description" class="textarea-label">Description</label>
        <textarea class="px-2 rounded-md border border-black" name="description" id="description"><%= book.description %></textarea>
    </div>
    
    <div class="mt-3 flex *:mr-2">
        <a href="/user/books" class="px-2 bg-gray-200 border border-black hover:bg-gray-300 transition-all ease-in rounded-md">Cancel</a>
        <button type="reset" class="px-2 bg-gray-200 border border-black hover:bg-gray-300 transition-all ease-in rounded-md">Reset</button>
        <button type="submit" class="px-2 bg-sky-200 border border-black hover:bg-sky-300 transition-all ease-in rounded-md">Submit</button>
    </div>
</form>